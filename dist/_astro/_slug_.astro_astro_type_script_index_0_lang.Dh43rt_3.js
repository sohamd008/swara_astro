import{p as a}from"./playerStore.3h6i64Dz.js";import{u as i}from"./authStore.B4Ww63-g.js";import"./index.D8u1G3xY.js";import"./firebase.HaRU0pKT.js";document.querySelectorAll(".play-btn").forEach(e=>{e.addEventListener("click",()=>{const{title:t,artist:r,url:n,id:l}=e.dataset;a({id:l,title:t,artist:r,url:n})})});document.querySelectorAll(".download-btn").forEach(e=>{e.addEventListener("click",async()=>{const t=e.dataset.url;if(!i.get()){alert("Please log in to download high-quality audio."),window.location.href="/login";return}try{const n=t.split(".").pop();if(["mp3","wav"].includes(n),e.textContent="Checking...",(await fetch(t,{method:"HEAD"})).ok){const o=document.createElement("a");o.href=t,o.download="",o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o),e.textContent="↓ Download"}else alert("File not found on server."),e.textContent="Error"}catch{confirm("Direct check failed (likely CORS). Open Download in new tab?")&&window.open(t,"_blank"),e.textContent="↓ Download"}})});
